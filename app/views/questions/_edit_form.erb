<%= form_with model: @question_form, url: question_path(@question_form.question), method: :patch, local: true do |f| %>

  <%# --- バリデーションエラーメッセージ --- %>
  <%= render 'shared/error_messages', object: f.object %>

  <%# --- 質問タイトル入力欄 --- %>
      <div data-controller="textarea" class="relative mb-6">
        <%= f.text_area :title,
            data: { textarea_target: "input" },
            class: "peer w-full h-14 p-3 pt-6 border border-black rounded focus:outline-none focus:border-orange resize-none transition-all duration-200",
            placeholder: "" %>

        <%= f.label :title,
            data: { textarea_target: "label" },
            class: "absolute left-3 top-3 text-black transition-all duration-200 peer-focus:top-1 peer-focus:left-3 peer-focus:text-xs peer-focus:text-orange peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-not-placeholder-shown:top-1 peer-not-placeholder-shown:left-3 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-orange" %>

        <div data-textarea-target="counter" class="absolute bottom-1 right-2 text-xs text-black">
          <span data-textarea-target="currentLength">0</span>/<%= 29 %>
        </div>
        <% @question_form.errors.full_messages_for(:title).each do |message| %>
          <p class="text-red-500 text-xs italic mt-1"><%= message %></p>
        <% end %>
      </div>

  <%# --- 選択肢入力欄 --- %>
      <div class="relative mb-6" data-controller="textarea">
        <%= f.text_area :option1_content,
            data: { textarea_target: "input" },
            class: "peer w-full h-14 p-3 pt-6 border border-black rounded focus:outline-none focus:border-orange transition-all duration-200",
            placeholder: "" %>
        <%= f.label :option1_content,
            data: { textarea_target: "label" },
            class: "absolute left-3 top-3 text-black transition-all duration-200 peer-focus:top-1 peer-focus:left-3 peer-focus:text-xs peer-focus:text-orange peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-not-placeholder-shown:top-1 peer-not-placeholder-shown:left-3 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-orange" %>
        <div data-textarea-target="counter" class="absolute bottom-1 right-2 text-xs text-black">
          <span data-textarea-target="currentLength">0</span>/<%= 29 %>
        </div>
        <% @question_form.errors.full_messages_for(:option1_content).each do |message| %>
          <p class="text-red-500 text-xs italic mt-1"><%= message %></p>
        <% end %>
      </div>
      <%# 選択肢2 %>
      <div class="relative mb-6" data-controller="textarea">
        <%= f.text_area :option2_content,
            data: { textarea_target: "input" },
            class: "peer w-full h-14 p-3 pt-6 border border-black rounded focus:outline-none focus:border-orange transition-all duration-200",
            placeholder: "" %>
        <%= f.label :option2_content,
            data: { textarea_target: "label" },
            class: "absolute left-3 top-3 text-black transition-all duration-200 peer-focus:top-1 peer-focus:left-3 peer-focus:text-xs peer-focus:text-orange peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-not-placeholder-shown:top-1 peer-not-placeholder-shown:left-3 peer-not-placeholder-shown:text-xs peer-not-placeholder-shown:text-orange" %>
        <div data-textarea-target="counter" class="absolute bottom-1 right-2 text-xs text-black">
          <span data-textarea-target="currentLength">0</span>/<%= 29 %>
        </div>
        <% @question_form.errors.full_messages_for(:option2_content).each do |message| %>
          <p class="text-red-500 text-xs italic mt-1"><%= message %></p>
        <% end %>
      </div>

  <%# --- フッター（作成者情報とボタン類） --- %>
  <div class="flex items-center space-x-3 mt-8 pt-4 border-t border-gray-200">
    <img src="<%= question.user.google_image_url %>" alt="<%= question.user.name %>" class="w-10 h-10 rounded-full">
    <span class="font-md"><%= t('.creater')%>: <%= question.user.name %></span>

    <div class="ml-auto flex items-center space-x-4">
      <%# キャンセルボタン（質問詳細に戻る） %>
      <%= link_to t('.cancel'), question_path(question), class: "text-gray-500 hover:text-gray-900" %>
      <%# 更新ボタン %>
      <%= f.submit class: "py-2 px-4 rounded-lg bg-orange text-white font-semibold hover:bg-dark-orange transition duration-200 cursor-pointer" %>
    </div>
  </div>
<% end %>